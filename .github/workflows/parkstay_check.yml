name: Parks WA Campsite Checker 
 
on: 
  schedule: 
    - cron: "*/30 * * * *"  # every 30 minutes 
  workflow_dispatch:        # allow manual run 
 
jobs: 
  check: 
    runs-on: ubuntu-latest 
    steps: 
      - name: Checkout repository 
        uses: actions/checkout@v4 
 
      - name: Set up Python 
        uses: actions/setup-python@v5 
        with: 
          python-version: "3.10" 
 
      - name: Install dependencies 
        run: pip install -r requirements.txt 
 
      - name: Run campsite checker 
        env: 
          EMAIL_FROM: ${{ secrets.EMAIL_FROM }} 
          EMAIL_TO: ${{ secrets.EMAIL_TO }} 
          EMAIL_PASSWORD: ${{ secrets.EMAIL_PASSWORD }} 
          SMTP_SERVER: ${{ secrets.SMTP_SERVER }}
          SMTP_PORT: ${{ secrets.SMTP_PORT }}
          SMTP_USERNAME: ${{ secrets.SMTP_USERNAME }}
          SITE_ID: ${{ secrets.SITE_ID }} 
          ARRIVAL_DATE: ${{ secrets.ARRIVAL_DATE }} 
          DEPARTURE_DATE: ${{ secrets.DEPARTURE_DATE }} 
          NUM_ADULTS: ${{ secrets.NUM_ADULTS }} 
          CHECK_INTERVAL_MINUTES: 30 
        run: python parkstay_checker.py
